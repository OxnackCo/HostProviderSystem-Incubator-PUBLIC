# HostProviderSystem
syatem to Oxnack host provider service apis and ani services without web site
# Документация проекта Oxnack

## Обзор проекта

**Oxnack** - это IT-инкубатор с акцентом на предоставление услуг хостинг-провайдера. Проект сочетает в себе платформу для запуска и поддержки IT-проектов с полноценной инфраструктурой VPS-хостинга.

## Архитектура системы

### Основные компоненты

1. **Веб-интерфейс** - клиентская часть для управления серверами
2. **Backend API** (Flask) - обработка запросов и бизнес-логика
3. **База данных** (PostgreSQL) - хранение пользователей, серверов, транзакций
4. **Proxmox VE** - платформа виртуализации для управления VPS
5. **pfSense** - сетевая инфраструктура и фаервол

### Технологический стек

- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **Backend**: Python 3.x, Flask
- **База данных**: PostgreSQL
- **Виртуализация**: Proxmox VE API
- **Сеть**: pfSense API
- **Аутентификация**: Cookie-based sessions

## Функциональность

### Основные возможности

#### Для пользователей:
- **Регистрация и аутентификация** через email/пароль
- **Аренда VPS серверов** с настраиваемыми параметрами:
  - Выбор операционной системы (Ubuntu, Debian, CentOS, Windows)
  - Настройка ресурсов (CPU, RAM, SSD)
  - Выбор локации сервера
- **Управление балансом** и оплата услуг
- **Применение промокодов** для скидок

#### Административные:
- **Управление виртуальными машинами** через Proxmox
- **Автоматическая настройка сети** через pfSense
- **Мониторинг ресурсов** и биллинг
- **Управление промокодами** и скидками

### Бизнес-модель

- **Pay-as-you-go** - оплата только за используемые ресурсы
- **Гибкая настройка** - пользователи выбирают точное количество CPU, RAM, SSD
- **Промо-программы** - система скидок для привлечения клиентов

## API Endpoints

### Основные endpoints:

| Метод | Endpoint | Назначение |
|-------|----------|------------|
| POST | `/create_machine` | Создание нового VPS |
| GET | `/get_balance` | Получение баланса пользователя |
| GET | `/countries` | Список доступных локаций |
| GET | `/osystems` | Список доступных ОС |
| GET | `/parametrs` | Параметры и цены |
| POST | `/calc_price` | Расчет стоимости конфигурации |

## База данных

### Основные таблицы:

- **users** - пользователи системы
- **servers** - информация о VPS серверах
- **transactions** - финансовые транзакции
- **promocodes** - промокоды и скидки

## Процесс создания сервера

1. **Пользовательская конфигурация**:
   - Выбор ОС, CPU, RAM, SSD
   - Применение промокода
   - Расчет стоимости

2. **Системные операции**:
   - Проверка баланса и списание средств
   - Выбор свободного сервера из пула
   - Настройка ресурсов через Proxmox API
   - Конфигурация сети (MAC-адрес, VLAN)
   - Настройка правил фаервола через pfSense

3. **Результат**:
   - Пользователь получает готовый VPS
   - Система автоматически настраивает доступ

## Безопасность

- **Аутентификация** через cookie-based сессии
- **Валидация входных данных** на всех уровнях
- **Защита от перерасхода** средств
- **Изоляция** виртуальных машин

## Масштабируемость

- **Модульная архитектура** позволяет легко добавлять новые локации
- **API-ориентированный дизайн** для интеграции с другими системами
- **Поддержка множества нод** Proxmox для горизонтального масштабирования

## Мониторинг и администрирование

- **Логирование** всех операций создания и настройки серверов
- **Балансировка нагрузки** между доступными серверами
- **Автоматическое восстановление** при сбоях

## Перспективы развития

- **Дополнительные сервисы**: резервное копирование, мониторинг
- **Расширение географии**: добавление новых дата-центров
- **Kubernetes-хостинг**: контейнерная платформа
- **Managed Services**: полностью управляемые решения

---

*Документация актуальна на момент создания и может изменяться по мере развития проекта.*